# üöÄ –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏

Spring Boot REST API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏.  
–ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é Maven –∏ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ(app) + PostgreSQL + pgAdmin).

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker Compose](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç-—Å-docker-compose)
5. [–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker](#–ª–æ–∫–∞–ª—å–Ω—ã–π-–∑–∞–ø—É—Å–∫-–±–µ–∑-docker)
6. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-api)
7. [–£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é](#—É—á—ë—Ç–Ω—ã–µ-–∑–∞–ø–∏—Å–∏-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
8. [–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤](#–ø—Ä–∏–º–µ—Ä—ã-–∑–∞–ø—Ä–æ—Å–æ–≤)

---

## ‚öôÔ∏è –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [Docker](https://docs.docker.com/get-docker/)
- [Docker Compose](https://docs.docker.com/compose/install/)
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞: **Java 17+** –∏ **Maven 3.6+**

---

## üßæ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üë§ –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

- **ADMIN**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –≤—Å–µ–º–∏ –∫–∞—Ä—Ç–∞–º–∏
- **USER**: –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ —Å–æ —Å–≤–æ–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏

### üí≥ –ö–∞—Ä—Ç—ã

- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ (**ADMIN**)
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è (**ADMIN**)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (**USER**)
- –ó–∞–ø—Ä–æ—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫–∞—Ä—Ç—ã (**USER**)
- –ë–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã (—Å –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–æ–º–µ—Ä–∞)

### üí∏ –ü–µ—Ä–µ–≤–æ–¥—ã

- –ü–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞—Ä—Ç

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT
- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Bank_REST
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ openapi.yaml
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ main/
    ‚îÇ   ‚îú‚îÄ‚îÄ java/com/example/bankcards/‚Ä¶ 
    ‚îÇ   ‚îî‚îÄ‚îÄ resources/
    ‚îÇ       ‚îú‚îÄ‚îÄ application.yml
    ‚îÇ       ‚îî‚îÄ‚îÄ application-dev.yml
    ‚îî‚îÄ‚îÄ test/
        ‚îî‚îÄ‚îÄ java/‚Ä¶
```

---

## üê≥ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker Compose

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   ```bash
   git clone <URL_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
   cd Bank_REST
    ```
---

2. **–°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**

   ```bash
   docker-compose up --build
   ```

3. **–°–µ—Ä–≤–∏—Å—ã –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞**

    * API: [http://localhost:8060](http://localhost:8060)
    * Swagger UI: [http://localhost:8060/swagger-ui.html](http://localhost:8060/swagger-ui.html)
    * PostgreSQL: –ø–æ—Ä—Ç `5432`
    * pgAdmin: [http://localhost:8050](http://localhost:8050)
      –õ–æ–≥–∏–Ω: `admin@admin.com`
      –ü–∞—Ä–æ–ª—å: `admin`

4. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞**

   ```bash
   docker-compose down -v --rmi all
   ```

---

## üíª –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
    * Java 17+
    * Maven 3.6+
    * PostgreSQL

2. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

    ```sql
   CREATE USER "BankRest" WITH PASSWORD 'BankRest';
   ```
3. –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

   ```sql
   CREATE DATABASE BankRest;
   ```

4. –ü—Ä–æ–ø–∏—Å–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `src/main/resources/application-dev.yml`.

5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

   ```bash
   ./mvnw clean package
   ./mvnw spring-boot:run -Dspring-boot.run.profiles=dev
   ```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

* Swagger UI: [http://localhost:8060/swagger-ui.html](http://localhost:8060/swagger-ui.html)
* OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è: `docs/openapi.yaml`

---

## üë• –£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–í —Å–∏—Å—Ç–µ–º—É –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:

### üîë Admin

* –õ–æ–≥–∏–Ω: `admin`
* –ü–∞—Ä–æ–ª—å: `admin`

### üë§ User

* –õ–æ–≥–∏–Ω: `user`
* –ü–∞—Ä–æ–ª—å: `user`

---

## üìå –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```http
POST /api/v1/auth/login
Content-Type: application/json

{
  "userName": "user",
  "password": "user"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ä—Ç (ADMIN)

```http
GET /api/v1/cards/all
Authorization: Bearer <JWT>
```

### –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã

```http
POST /api/v1/cards/replenish/1
Authorization: Bearer <JWT>
Content-Type: application/json

{
  "amount": 500
}
```

### –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏

```http
POST /api/v1/transfer/user/2
Authorization: Bearer <JWT>
Content-Type: application/json

{
  "fromCardId": 1,
  "toCardId": 2,
  "amount": 100
}
```
