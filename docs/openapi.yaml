{"openapi":"3.1.0","info":{"title":"Bank Cards API","description":"Документация API для управления банковскими картами","version":"1.0.0"},"servers":[{"url":"http://localhost:8060","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"User","description":"Управление пользователями"},{"name":"Card","description":"Методы управления банковскими картами"},{"name":"Transfers","description":"Переводы между картами и просмотр истории переводов"},{"name":"Card Requests","description":"Заявки на блокировку банковских карт"},{"name":"Authentication","description":"Операции для входа в систему"}],"paths":{"/api/v1/transfer/user/{userId}":{"post":{"tags":["Transfers"],"summary":"Выполнить перевод","description":"Переводит средства между картами текущего пользователя","operationId":"transfer","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransferUserRequest"}}},"required":true},"responses":{"200":{"description":"Перевод выполнен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"400":{"description":"Неверный запрос: одинаковые карты или недостаточно средств","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Нет прав на выполнение операции","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Одна из карт не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"409":{"description":"Карты должны быть активны","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/cards/replenish/{id}":{"post":{"tags":["Card"],"summary":"Пополнить карту","description":"Увеличивает баланс карты на указанную сумму","operationId":"replenish","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReplenishRequest"}}},"required":true},"responses":{"200":{"description":"Баланс обновлён","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Карта не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/cards/create":{"post":{"tags":["Card"],"summary":"Создать карту","description":"Создание новой банковской карты","operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCardRequest"}}},"required":true},"responses":{"200":{"description":"Карта успешно создана","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"400":{"description":"Неверные параметры","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/card-request/rejected/{id}":{"post":{"tags":["Card Requests"],"summary":"Отклонить заявку","description":"Администратор отклоняет заявку на блокировку карты.","operationId":"reject","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Заявка отклонена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Нет прав администратора","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Заявка не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/card-request/block/{id}":{"post":{"tags":["Card Requests"],"summary":"Создать заявку на блокировку","description":"Владелец карты отправляет запрос на её блокировку. Пока администратор не рассмотрит заявку, карта остаётся активной.","operationId":"requestBlock","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"202":{"description":"Заявка принята","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Пользователь не является владельцем карты","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Карта не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/auth/register":{"post":{"tags":["Authentication"],"summary":"Регистрация","description":"Создание нового пользователя. В ответ возвращает JWT-токен","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"Пользователь успешно зарегистрирован","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"400":{"description":"Некорректные данные для регистрации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["Authentication"],"summary":"Выход","description":"Выход из системы. Завершает сессию пользователя","operationId":"logout","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutRequest"}}},"required":true},"responses":{"200":{"description":"Выход выполнен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Запрещено выполнять выход за другого пользователя","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Авторизация","description":"Вход в систему по логину и паролю. Возвращает JWT-токен","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Успешный вход","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"401":{"description":"Неверные учетные данные","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/user/{id}":{"get":{"tags":["User"],"summary":"Получить пользователя по ID","description":"Возвращает данные пользователя по ID","operationId":"getId","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Пользователь найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}},"delete":{"tags":["User"],"summary":"Удалить пользователя","description":"Удаляет пользователя по ID","operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Пользователь успешно удалён","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}},"patch":{"tags":["User"],"summary":"Обновить данные пользователя","description":"Обновляет информацию пользователя по ID","operationId":"update","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}},"required":true},"responses":{"200":{"description":"Данные пользователя успешно обновлены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/cards/blocked/{id}":{"patch":{"tags":["Card"],"summary":"Заблокировать карту","description":"Переводит карту в статус блокировки","operationId":"block","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Карта заблокирована","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Карта не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/cards/activate/{id}":{"patch":{"tags":["Card"],"summary":"Активировать карту","description":"Снимает блокировку или активирует карту","operationId":"activate","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Карта активирована","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"409":{"description":"Карта уже активна","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/user/{userId}/total-balance":{"get":{"tags":["User"],"summary":"Получить общий баланс пользователя","description":"Возвращает суммарный баланс всех карт пользователя","operationId":"getTotalBalance","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Баланс получен успешно","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/user/all":{"get":{"tags":["User"],"summary":"Получить всех пользователей","description":"Возвращает страницу списка всех пользователей (только для администратора)","operationId":"getAll","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"200":{"description":"Список пользователей получен успешно","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/transfer/{id}":{"get":{"tags":["Transfers"],"summary":"Получить перевод по ID","description":"Возвращает детали перевода по его идентификатору (только администратор)","operationId":"getById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные перевода найдены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Нет прав администратора","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Перевод не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/transfer/by-user/{userId}":{"get":{"tags":["Transfers"],"summary":"Переводы пользователя","description":"Возвращает все переводы, выполненные конкретным пользователем","operationId":"getAllByUser","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"200":{"description":"История переводов получена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Попытка доступа к чужой истории переводов","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/transfer/all":{"get":{"tags":["Transfers"],"summary":"Все переводы (администратор)","description":"Администратор получает список всех переводов","operationId":"getAll_1","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"200":{"description":"Список переводов получен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Нет прав администратора","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/cards/{cardId}":{"get":{"tags":["Card"],"summary":"Карта по ID","description":"Возвращает данные карты по её идентификатору","operationId":"getById_1","parameters":[{"name":"cardId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Карта найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Карта не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/cards/balance/{cardId}/user/{userId}":{"get":{"tags":["Card"],"summary":"Баланс карты","description":"Возвращает текущий баланс карты по ID","operationId":"getBalance","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"cardId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Баланс получен","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Нет доступа","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/cards/all":{"get":{"tags":["Card"],"summary":"Список всех карт","description":"Возвращает полный список карт банка постранично","operationId":"getAll_2","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"200":{"description":"Карты получены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Нет прав для доступа","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/cards/all/by-user/{userId}":{"get":{"tags":["Card"],"summary":"Карты текущего пользователя","description":"Возвращает список карт, принадлежащих пользователю","operationId":"getAllByUser_1","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"200":{"description":"Карты пользователя найдены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Доступ запрещён","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/card-request/{id}":{"get":{"tags":["Card Requests"],"summary":"Получить заявку по ID (для администратора)","description":"Администратор может просмотреть любую заявку по её идентификатору.","operationId":"getById_2","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Заявка найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Нет прав администратора","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Заявка не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/card-request/{id}/by-user":{"get":{"tags":["Card Requests"],"summary":"Получить заявку пользователя по ID","description":"Возвращает заявку на блокировку карты, если она принадлежит текущему пользователю.","operationId":"getUserRequest","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"userId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Заявка найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Доступ к чужой заявке запрещён","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Заявка не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/card-request/all":{"get":{"tags":["Card Requests"],"summary":"Все заявки (администратор)","description":"Администратор получает список всех заявок в системе.","operationId":"getAll_3","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"200":{"description":"Все заявки возвращены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Нет прав администратора","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/card-request/all/by-user/{userId}":{"get":{"tags":["Card Requests"],"summary":"Заявки пользователя","description":"Возвращает все заявки на блокировку, созданные конкретным пользователем.","operationId":"getAllByUser_2","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"200":{"description":"Заявки пользователя найдены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"403":{"description":"Попытка получить чужие заявки","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/cards/{id}":{"delete":{"tags":["Card"],"summary":"Удалить карту","description":"Удаляет карту из системы","operationId":"delete","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Карта удалена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Карта не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}}},"components":{"schemas":{"APIResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{},"status":{"type":"integer","format":"int32"}}},"TransferUserRequest":{"type":"object","properties":{"fromCardId":{"type":"integer","format":"int64"},"toCardId":{"type":"integer","format":"int64"},"amount":{"type":"number"}}},"ReplenishRequest":{"type":"object","properties":{"amount":{"type":"number"}}},"CreateCardRequest":{"type":"object","properties":{"ownerId":{"type":"integer","format":"int64"}}},"RegisterRequest":{"type":"object","properties":{"userName":{"type":"string"},"password":{"type":"string"}}},"LogoutRequest":{"type":"object","properties":{"username":{"type":"string"}}},"LoginRequest":{"type":"object","properties":{"userName":{"type":"string"},"password":{"type":"string"}}},"UserDTO":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"},"roles":{"type":"array","items":{"type":"string","enum":["Role{roleName='USER'}","Role{roleName='ADMIN'}"]},"uniqueItems":true}}}},"securitySchemes":{"bearerAuth":{"type":"http","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}